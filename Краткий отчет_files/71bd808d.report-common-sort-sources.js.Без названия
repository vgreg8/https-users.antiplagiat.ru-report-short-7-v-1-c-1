$(document).ready(function(){$(".sources table th").find("span[data-sort]").click(function(){var a=$(this),b=a.closest("th").index(),c=a.hasClass("active-order"),d=a.data("sort");$(".main-inner > .report-formatting").length>0&&(setYMFullReportCounter("sources_sorting_by_"+d),setGAFullReportCounter("sources_list","sources_sorting_by_"+d));var e=!0;c?a.hasClass("up")?a.removeClass("up").addClass("down"):(e=!1,a.removeClass("down").addClass("up")):($(".active-order").removeClass("active-order").removeClass("up").addClass("down"),a.addClass("active-order"));var f=b;$(".sources table td").filter(function(){return $(this).index()===f});$(".sources table td").filter(function(){return $(this).index()===f}).sortElements(function(a,b){if("num"==d){var c=/[^0-9]/,f=parseInt($.trim($(a).find("div.num").text()).replace(c,"")),g=parseInt($.trim($(b).find("div.num").text()).replace(c,""));return f>g?e?-1:1:e&&f!=g?1:-1}if("percentbytext"==d){var c=/%/gi,f=parseFloat($.trim($(a).find("div.percent-by-text").text()).replace(c,"").replace(",","."))||0,g=parseFloat($.trim($(b).find("div.percent-by-text").text()).replace(c,"").replace(",","."))||0;return f>g?e?-1:1:e&&f!=g?1:-1}if("percent"==d){var c=/%/gi,f=parseFloat($.trim($(a).find("div.percent").text()).replace(c,"").replace(",","."))||0,g=parseFloat($.trim($(b).find("div.percent").text()).replace(c,"").replace(",","."))||0;return f>g?e?-1:1:e&&f!=g?1:-1}if("name"==d){var f=$.trim($(a).find("div.name").text().toLowerCase()),g=$.trim($(b).find("div.name").text().toLowerCase());return f>g?e?-1:1:e&&f!=g?1:-1}if("date"==d){var f=$.trim($(a).find("i").text()),g=$.trim($(b).find("i").text()),h=new Date(Date.parse(f)),i=new Date(Date.parse(g));return h.getTime()>i.getTime()?e?-1:1:e&&h.getTime()!=i.getTime()?1:-1}if("collection"==d){var f=$.trim($(a).find("div.collections").text().toLowerCase()),g=$.trim($(b).find("div.collections").text().toLowerCase());return f>g?e?-1:1:e&&f!=g?1:-1}if("datepublish"==d){var f=$.trim($(a).find("div.date-publish").text().toLowerCase()),g=$.trim($(b).find("div.date-publish").text().toLowerCase()),j=new RegExp("^[0-9]+$"),k=j.test(f),l=j.test(g);if(k&&l)f=parseInt(f,10)||null,g=parseInt(g,10)||null;else if(k||l)return k&&e?-1:1;return f>g?e?-1:1:e&&f!=g?1:-1}if("blocks"==d){var c=/[^0-9]/,f=parseInt($.trim($(a).find("div.cite-blocks-by-report").text()).replace(c,"")),g=parseInt($.trim($(b).find("div.cite-blocks-by-report").text()).replace(c,""));return f>g?e?-1:1:e&&f!=g?1:-1}if("blocksbytext"==d){var c=/[^0-9]/,f=parseInt($.trim($(a).find("div.cite-blocks-by-text").text()).replace(c,"")),g=parseInt($.trim($(b).find("div.cite-blocks-by-text").text()).replace(c,""));return f>g?e?-1:1:e&&f!=g?1:-1}},function(){return this.parentNode}),$(".sources-list .scroll-area").animate({scrollTop:0},200,function(){})})});